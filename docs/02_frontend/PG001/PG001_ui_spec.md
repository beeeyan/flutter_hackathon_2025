# 画面仕様書: PG001

## 画面メタ

| カラム名   | 内容               |
| ---------- | ------------------ |
| 画面 ID    | PG001              |
| 画面名     | プロフィール設定   |
| 画面物理名 | profile_setup_page |

## UI 要素一覧（必須）

| 要素 ID | 要素名                   | 種別        | 文言キー/アイコン                             | 初期状態（表示/活性/選択）      | 表示/活性条件                  |
| ------- | ------------------------ | ----------- | --------------------------------------------- | ------------------------------- | ------------------------------ |
| E01     | ヘッダータイトル         | Label       | プロフィール設定                              | 表示                            | -                              |
| E02     | アバタープレビュー       | Image       | (選択中の画像)                                | 表示（デフォルト画像 1 を表示） | -                              |
| E03     | 画像アップロードボタン   | Button/Icon | カメラアイコン                                | 表示                            | -                              |
| E04     | アップロードインジケータ | Progress    | -                                             | 非表示                          | 画像アップロード処理中のみ表示 |
| E05     | デフォルト画像選択ラベル | Label       | またはデフォルトから選択                      | 表示                            | -                              |
| E06     | デフォルト画像リスト     | Grid/List   | (画像 6 種)                                   | 表示/活性                       | -                              |
| E07     | ニックネーム入力欄       | TextField   | Label: ニックネーム<br>Hint: 例：タロウ       | 表示/活性<br>空文字             | -                              |
| E08     | ニックネーム文字数       | Label       | 0 / 8                                         | 表示                            | -                              |
| E09     | Bio 入力欄               | TextField   | Label: 自己紹介<br>Hint: 任意（100 文字以内） | 表示/活性<br>空文字             | -                              |
| E10     | Bio 文字数               | Label       | 0 / 100                                       | 表示                            | -                              |
| E11     | 保存ボタン               | Button      | 設定を保存してはじめる                        | 表示/非活性                     | -                              |

## アクション一覧（必須）

| アクション ID | トリガー（操作）          | 対象要素 | 前提/ガード   | 実行内容（状態変更/副作用）                                                                                                              | 遷移先 |
| ------------- | ------------------------- | -------- | ------------- | ---------------------------------------------------------------------------------------------------------------------------------------- | ------ |
| A01           | E03 (アップロード) 押下   | システム | -             | 1. 端末の画像ピッカーを起動<br>2. 選択後、E04 を表示し非同期で Storage へアップロード開始<br>3. 完了後、取得した URL を保持し E02 に反映 | -      |
| A02           | E06 (デフォルト画像) 選択 | E02      | -             | 1. 選択した画像の URL を保持<br>2. E02 に即時反映                                                                                        | -      |
| A03           | E07 (名前) 入力           | E08, E11 | 文字数 <= 8   | 1. 入力値を保持<br>2. E08(文字数)を更新<br>3. 入力有かつアップロード中でなければ E11 を活性化                                            | -      |
| A04           | E09 (Bio) 入力            | E10      | 文字数 <= 100 | 1. 入力値を保持<br>2. E10(文字数)を更新                                                                                                  | -      |
| A05           | E11 (保存) 押下           | システム | E11 が活性    | 1. ローディング表示開始<br>2. 匿名認証を実行(未済の場合)<br>3. Firestore `users` コレクションに保存<br>4. 保存完了後、画面遷移           | PG002  |
